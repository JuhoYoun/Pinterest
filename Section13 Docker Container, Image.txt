Image라는 것을 어디서 가져올까? -> 우리가 직접 만들수도 있고 여러가지 방법이 있긴한데 우리는 Dockerhub라는것을 사용할것이다 우리가 올리는 Image뿐만 아니라 여러 기업들의 Image가 올라가있다
이 Imagae들을 받아 새로운 Image를 만들거나 새로운 container를 만드는 등 활용할 수 있다
첫번째 이미지로 portainer라는 소프트웨어다 이것은 docker를 GUI로 바꿔주는 소프트웨어이다 dockerhub에서 portainer 공식 image를 가져워 우리의 가상서버에 portainer container를 만들것이다

dockerhub에 가서 portainer로 검색 portainer-ce 버전을 받자 (community edition) -> portainer-ce 클릭 -> deploy container
뭔 일 있는지 페이지 에러 뜬다 ㅋㅋ 그냥 여기로 -> https://docs.portainer.io/start/install-ce/server/docker/linux

docker volume create portainer_data
docker run -d -p 8000:8000 -p 9443:9443 --name portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest

이 두 커맨드로 설치하면 된다 근데 여기서 두번째 커맨드의 -p 8000:8000 이 부분은 지워주자 8000번 포트를 사용한다는건데 우리는 9443 포트만 쓴다

docker ps -> 실행되있는 container 보여준다
docker restart portainer -> portainer 컨테이너를 재시작한다

https://localhost:9443  localhost 는 VULTR 가상서버 ip 주소 -> 이렇게 하면 웹브라우저에서 접근 가능하다 
local -> container 를 보면 portainer 이미지를 이용한 컨테이너 하나가 구동중인것을 확인할 수 있다
 
 port 
 포트라는 개념은 서버와 통신할 때 사용한다 VULTR는 포트들을 가진 하나의 가상 서버이고 VULTR안의 portainer 컨테이너도 하나의 시스템이다 그러므로 portainer에도 포트가 존재한다
 https://localhost:9443 이런식으로 브라우저를 통해 portainer에 접근을 하려면 VULTR의 포트와 portainer의 포트와 연결시켜주는 작업이 필요하다
 -p 9443:9443  이 부분이 VULTR의 9443과 portainer의 9443 포트를 연결한다는 의미이다 이렇게 웹브라우저를 통해 VULTR 내부의 portainer 컨테이너와 통신이 가능하다
 
 port 80
 HTTP protocol
 웹브라우저에 google.com 이런식으로 아무런 포트를 스지 않고 입력하면 한번 80번 포트로 연결되게 되어있다
 
 NGINX
 NGINX 소픝웨어를 도커허브에서 이미지를 가져와 실재 컨테이너를 만들어볼것이다 위에 설명한것과 같이 포트를 연결해보자 portainer GUI에서 한번 해보자
 container list를 가보자 -> add container 
 name은 원하는대로 쓰고 image에 nginx라고 입력 그리고 Always pull the image 클릭
Manual network port publishing -> publish a new network port 
host 80 container 80
그리고 Deploy the container 눌러주자 컨테이너가 생성된다 -> https://localhost:80 으로 가면 nginx welcome 페이지를 볼 수다

다음에는 Django 컨테이너를 만들거다 nginx 처럼 공식 이미지가 있는것이 아니라 우리의 소스를 넣어야된다
Django 컨테이너를 만드는 과정은 다음과 같다
1. Upload source to Github
2. Write Dockerfile -> 이미지를 만드는 설계서
3. Build Image
4. Run Container

일단 Github에 가서 새로운 repository를 하나 생성한다 생성시 나오는 화면에 우리가 만든 소스코드를 어떻게 이 레포지토리에 올리는지 설명이 나와있다

…or push an existing repository from the command line
git remote add origin https://github.com/JuhoYoun/My-Home.git
git branch -M main
git push -u origin main

이걸 이용하자

chatgpt:

이 명령어들은 GitHub에 새로운 Git repository를 만들고, 로컬에서 작성한 코드를 원격 저장소로 push하는 과정입니다.

git remote add origin https://github.com/JuhoYoun/My-Home.git: 새로운 Git repository를 생성하고 원격 저장소 URL을 설정합니다.
git branch -M main: Git branch를 새로 만들고, 기존의 main branch를 새로운 branch로 이름을 변경합니다.
git push -u origin main: 변경된 로컬 브랜치를 원격 저장소의 main 브랜치에 push합니다. -u 옵션은 이후에 push할 때 기본으로 원격 저장소의 main 브랜치로 push 하도록 설정하는 것입니다.
이 과정을 마치면 GitHub의 원격 저장소에 코드가 업로드되어 공개됩니다.

branch이름을 master에서 main으로 바꾸게됬는데 최근에 master라고 쓰는것을 지양하는것 





